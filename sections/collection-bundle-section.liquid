{%- assign per_row = section.settings.per_row -%}
{%- assign paginate_by = per_row | times: section.settings.rows_per_page -%}

<div
  id="CollectionSection"
  data-section-id="{{ section.id }}"
  data-section-type="collection-bundle-section"
  class="bundle-collection__body custom-bundle"
>

  <div class="bundle-tab__list" data-aos="row-of-3">
    <div class="bundle-tab__item active" data-aos="row-of-3" data-collection-id="bundle-inspiration">
      <div class="bundle_tab__item_wrapper">
        <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <rect width="14" height="14" fill="url(#pattern0)"/>
          <defs>
          <pattern id="pattern0" patternContentUnits="objectBoundingBox" width="1" height="1">
          <use xlink:href="#image0_289_1448" transform="scale(0.01)"/>
          </pattern>
          <image id="image0_289_1448" width="100" height="100" xlink:href="data:image/png;base64,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"/>
          </defs>
        </svg>          
        <span class="bundle-tab__item-text">Inspiration</span>
      </div>
    </div>
    {%- for block in section.blocks -%}
      <div class="bundle-tab__item" data-aos="row-of-3" data-collection-id="{{block.settings.collection.id}}">
        {%- if block.settings.title != blank -%}
          <div class="bundle_tab__item_wrapper" data-title="{{block.settings.title}}">
            <span class="bundle-tab__item-count hide" data-count="0"></span>
            <span class="bundle-tab__item-text">{{ block.settings.title }}</span>
          </div>
        {%- endif -%}
      </div>
    {%- endfor -%}
  </div>
  <div class="collection_bundlelist" data-collection-id="bundle-inspiration">
    {% render 'collection-bundle-inspiration' %}
  </div>
  {% for block in section.blocks %}
    {% assign tab_index = forloop.index %}
    <div class="collection_bundlelist hide {% comment %}{% unless forloop.first %}hide{% endunless %}{% endcomment %}" data-collection-id="{{block.settings.collection.id}}">
      {% for item in block.settings.collection.products %}
        {% render 'product-bundle',
          product: item,
          products: block.settings.collection.products,
          title: block.settings.title,
          description_style: 'default',
          image_position: 'left',
          image_container_width: 'large',
          section_id: item.id,
          social: true,
          isModal: false,
          thumbnail_position: 'beside',
          thumbnail_arrows: false,
          index: forloop.index,
          tab_index: tab_index,
          data_collection_id: block.settings.collection.id
        %}
      {% endfor %}
    </div>
  {% endfor %}
  <div
    class="grid grid--uniform grid--collection{% if section.settings.mobile_flush_grid %} small--grid--flush{% endif %}"{% unless section.settings.enable_collection_count %} data-scroll-to{% endunless %}>
    {%- liquid
      assign grid_item_width = 'small--one-half medium-up--one-third'

      case per_row
        when 2
          assign grid_item_width = 'medium-up--one-half'
        when 3
          assign grid_item_width = 'small--one-half medium-up--one-third'
        when 4
          assign grid_item_width = 'small--one-half medium-up--one-quarter'
        when 5
          assign grid_item_width = 'small--one-half medium-up--one-fifth'
      endcase
    -%}  

  </div>

</div>


{% schema %}
  {
    "name": "Bundle collections",
    "settings": [      
      {
        "type": "header",
        "content": "Subcollections"
      }
    ],
    "blocks": [
      {
        "type": "Collection",
        "name": "Collection",
        "limit": 4,
        "settings": [
          {
            "type": "text",
            "id": "title",
            "label": "Collection Name"
          },
          {
            "id": "collection",
            "type": "collection",
            "label": "Collection"
          }
        ]
      }
    ]
  }
{% endschema %}
